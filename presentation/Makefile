# Makefile 
#
# Compiles presentations and handouts for the Introduction to Bioinformatics
# training course
#
# To generate all presentation files, issue `make presentation` or `make slides`
#
# To generate all handouts, issue `make handouts`.
#
# To generate both presentation files and handouts, issue `make all`.
#
# (c) 2014-2015 James Hutton Institute
# Author: Leighton Pritchard

.PHONY : all
all : presentation handouts

.PHONY : presentation
presentation : part0_slides part1_slides part1ne_slides part2_slides \
	part3_slides
	make clean_intermediates

.PHONY : slides
slides : presentation

.PHONY : handouts
handouts : part0_handouts part1_handouts part1ne_handouts part2_handouts \
	part3_handouts exercises
	make clean_intermediates

# Exercises (the code that attendees type)
###
.PHONY : exercises
exercises : exercises.pdf

# Presentation part 0
###
.PHONY : part0
part0 : part0_slides part0_handouts

.PHONY : part0_slides
part0_slides : part0_soyouwanttobe_slides.pdf

.PHONY : part0_handouts
part0_handouts : part0_soyouwanttobe_handouts.pdf

# Presentation part 1
###
.PHONY : part1
part1 : part1_slides part1_handouts

.PHONY : part1_slides
part1_slides : part1_goldenrules_slides.pdf

.PHONY : part1_handouts
part1_handouts : part1_goldenrules_handouts.pdf

# Presentation part 1 - NO EXERCISE SOLUTIONS
###
.PHONY : part1ne
part1ne : part1ne_slides part1ne_handouts

.PHONY : part1ne_slides
part1ne_slides : part1_goldenrules_noexercises_slides.pdf

.PHONY : part1ne_handouts
part1ne_handouts : part1_goldenrules_noexercises_handouts.pdf

# Presentation part 2
###
.PHONY : part2
part2 : part2_slides part2_handouts

.PHONY : part2_slides
part2_slides : part2_blast_slides.pdf

.PHONY : part2_handouts
part2_handouts : part2_blast_handouts.pdf

# Presentation part 3
###
.PHONY : part3
part3 : part3_slides part3_handouts

.PHONY : part3_slides
part3_slides: part3_workshop_slides.pdf

.PHONY : part3_handouts
part3_handouts: part3_workshop_handouts.pdf

# Clean up intermediate files generated by LaTeX
.PHONY : clean_intermediates
clean_intermediates:
	rm -f *.aux *.log *.nav *.out *.snm *.synctex.gz *.toc *.vrb
	rm -f sections/*.aux

# Clean up output files (i.e. slides/handounts)
.PHONY : clean_pdf
clean_pdf:
	rm -f *.pdf

# Clean up both intermediate and output files
.PHONY : clean
clean: clean_intermediates clean_pdf

# Currently, changing any sub-file will trigger regeneration of all
# output PDF files.
%.pdf : %.tex sections/*.tex images/*.png images/*.jpg handoutWithNotes.sty
	pdflatex $<
	pdflatex $<
